<!DOCTYPE html>
<html lang="en">
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-TDGHS7EY89"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-TDGHS7EY89');</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sell on Black Stack Diesel ‚Äî Vendor Portal</title>
<meta name="description" content="List your diesel truck parts on Black Stack Diesel. Commission-only, no upfront fees.">
<link rel="icon" type="image/x-icon" href="../favicon.ico">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&family=Archivo:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#08090B;--bg2:#0E1014;--bg3:#151820;--bg4:#1C2029;--ember:#FF6B2C;--ember2:#E85A1E;--ember-glow:rgba(255,107,44,.1);--amber:#F5A623;--smoke:#2A2D35;--t1:#F2EDE6;--t2:#A0A4B0;--t3:#5E6270;--bd:rgba(255,255,255,.06);--green:#34C759;--red:#E84545;--blue:#4A9EFF}
html{scroll-behavior:smooth}
body{font-family:'Archivo',sans-serif;background:var(--bg);color:var(--t1);overflow-x:hidden;-webkit-font-smoothing:antialiased}
a{color:inherit;text-decoration:none}
body::before{content:'';position:fixed;inset:0;background:url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='.03'/%3E%3C/svg%3E");pointer-events:none;z-index:9999;opacity:.4}

/* ============ SHARED ============ */
nav{position:fixed;top:0;left:0;right:0;z-index:100;padding:20px 40px;display:flex;justify-content:space-between;align-items:center;background:linear-gradient(to bottom,rgba(8,9,11,.95),transparent);backdrop-filter:blur(10px)}
.nav-logo{display:flex;align-items:center;gap:12px}
.nav-brand{font-family:'Rajdhani',sans-serif;font-size:20px;font-weight:700;letter-spacing:3px;text-transform:uppercase}
.nav-brand em{font-style:normal;color:var(--ember)}
.nav-links{display:flex;gap:24px;align-items:center}
.nav-links a{font-size:13px;font-weight:600;text-transform:uppercase;letter-spacing:2px;color:var(--t2);transition:.2s}
.nav-links a:hover{color:var(--ember)}
.nav-cta{padding:10px 24px;background:var(--ember);border-radius:8px;font-size:12px;font-weight:700;text-transform:uppercase;letter-spacing:2px;color:#fff;transition:.2s;cursor:pointer;border:none}
.nav-cta:hover{background:var(--ember2);transform:translateY(-1px)}
.fg{margin-bottom:14px;text-align:left}
.fg label{display:block;font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:1px;color:var(--t3);margin-bottom:6px}
.fi{width:100%;height:46px;background:var(--bg);border:2px solid var(--smoke);border-radius:10px;padding:0 14px;font-size:14px;color:var(--t1);font-family:'Archivo',sans-serif;outline:none;transition:.2s}
.fi:focus{border-color:var(--ember);box-shadow:0 0 0 3px var(--ember-glow)}
.fi::placeholder{color:var(--t3)}
textarea.fi{height:100px;padding:12px 14px;resize:vertical}
select.fi{appearance:none;cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M6 9l6 6 6-6' stroke='%235E6270' stroke-width='2'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 14px center;background-size:18px}
.form-btn{width:100%;height:52px;background:var(--ember);border:none;border-radius:10px;font-family:'Rajdhani',sans-serif;font-size:16px;font-weight:700;text-transform:uppercase;letter-spacing:2px;color:#fff;cursor:pointer;transition:.2s;margin-top:8px}
.form-btn:hover{background:var(--ember2);transform:translateY(-1px);box-shadow:0 6px 24px rgba(255,107,44,.3)}
.form-btn:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}
.form-err{color:var(--red);font-size:12px;text-align:center;margin-bottom:8px;display:none}
.badge{display:inline-block;padding:4px 10px;border-radius:6px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1px}
.badge-pending{background:rgba(245,166,35,.15);color:var(--amber)}
.badge-new{background:rgba(74,158,255,.15);color:var(--blue)}
.badge-shipped{background:rgba(52,199,89,.15);color:var(--green)}
.badge-active{background:rgba(52,199,89,.15);color:var(--green)}
.dist-card{background:var(--bg2);border:1px solid var(--bd);border-radius:12px;padding:20px;cursor:pointer;transition:.2s}
.dist-card:hover{border-color:rgba(255,107,44,.15)}
.dist-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
.dist-top strong{font-family:'Rajdhani',sans-serif;font-size:16px;font-weight:700;text-transform:uppercase;letter-spacing:1px}
.dist-card p{font-size:12px;color:var(--t3);line-height:1.5}
.dist-fields{margin-top:14px;border-top:1px solid var(--bd);padding-top:14px}
footer{padding:48px 40px;border-top:1px solid var(--bd);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:20px}
.footer-brand{display:flex;align-items:center;gap:10px}
.footer-brand span{font-family:'Rajdhani',sans-serif;font-size:14px;font-weight:700;text-transform:uppercase;letter-spacing:2px;color:var(--t3)}
.footer-links{display:flex;gap:24px}
.footer-links a{font-size:13px;color:var(--t3);transition:.2s}
.footer-links a:hover{color:var(--ember)}
.footer-legal{font-size:11px;color:var(--t3);width:100%;text-align:center;margin-top:20px}

/* ============ PITCH PAGE ============ */
#pitchPage .hero{min-height:80vh;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;padding:140px 40px 80px}
.hero-bg{position:absolute;inset:0;background:radial-gradient(ellipse at 30% 40%,rgba(255,107,44,.06),transparent 60%),radial-gradient(ellipse at 70% 60%,rgba(245,166,35,.04),transparent 50%)}
.hero-grid{position:absolute;inset:0;background-image:linear-gradient(rgba(255,255,255,.015) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,.015) 1px,transparent 1px);background-size:80px 80px;mask-image:radial-gradient(ellipse at center,black 30%,transparent 70%)}
.hero-content{max-width:800px;text-align:center;position:relative;z-index:2}
.hero-badge{display:inline-flex;align-items:center;gap:8px;padding:8px 20px;background:var(--bg3);border:1px solid var(--bd);border-radius:40px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:2px;color:var(--ember);margin-bottom:32px}
.hero h1{font-family:'Rajdhani',sans-serif;font-size:clamp(42px,7vw,80px);font-weight:700;line-height:.95;text-transform:uppercase;letter-spacing:2px;margin-bottom:24px}
.hero h1 em{font-style:normal;color:var(--ember)}
.hero p{font-size:clamp(16px,2vw,20px);color:var(--t2);max-width:600px;margin:0 auto 40px;line-height:1.6;font-weight:300}
.hero-ctas{display:flex;gap:16px;justify-content:center;flex-wrap:wrap}
.btn-main{padding:16px 40px;background:var(--ember);border:none;border-radius:10px;font-family:'Rajdhani',sans-serif;font-size:18px;font-weight:700;text-transform:uppercase;letter-spacing:3px;color:#fff;cursor:pointer;transition:.2s;display:inline-block}
.btn-main:hover{background:var(--ember2);transform:translateY(-2px);box-shadow:0 8px 32px rgba(255,107,44,.3)}
.btn-ghost{padding:16px 40px;background:transparent;border:2px solid var(--smoke);border-radius:10px;font-family:'Rajdhani',sans-serif;font-size:18px;font-weight:700;text-transform:uppercase;letter-spacing:3px;color:var(--t2);cursor:pointer;transition:.2s;display:inline-block}
.btn-ghost:hover{border-color:var(--t2);color:var(--t1)}
.stats-bar{display:flex;justify-content:center;gap:48px;padding:40px;border-top:1px solid var(--bd);border-bottom:1px solid var(--bd);background:var(--bg2)}
.stat{text-align:center}
.stat-val{font-family:'Rajdhani',sans-serif;font-size:42px;font-weight:700;color:var(--ember)}
.stat-lbl{font-size:11px;text-transform:uppercase;letter-spacing:2px;color:var(--t3);margin-top:4px}
section{padding:100px 40px}
.container{max-width:1100px;margin:0 auto}
.section-label{font-family:'Rajdhani',sans-serif;font-size:13px;font-weight:700;text-transform:uppercase;letter-spacing:4px;color:var(--ember);margin-bottom:16px}
.section-title{font-family:'Rajdhani',sans-serif;font-size:clamp(28px,4vw,44px);font-weight:700;text-transform:uppercase;letter-spacing:1px;line-height:1.1;margin-bottom:20px}
.section-desc{font-size:17px;color:var(--t2);max-width:560px;line-height:1.65;font-weight:300}
.why{background:var(--bg2)}
.why-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-top:48px}
.why-card{background:var(--bg3);border:1px solid var(--bd);border-radius:16px;padding:32px 24px;position:relative;overflow:hidden;transition:.3s}
.why-card:hover{transform:translateY(-4px);border-color:rgba(255,107,44,.15);box-shadow:0 12px 40px rgba(0,0,0,.4)}
.why-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,transparent,var(--ember),transparent);opacity:0;transition:.3s}
.why-card:hover::before{opacity:1}
.why-icon{width:48px;height:48px;background:var(--ember-glow);border:1px solid rgba(255,107,44,.15);border-radius:12px;display:flex;align-items:center;justify-content:center;margin-bottom:18px;font-size:22px}
.why-card h3{font-family:'Rajdhani',sans-serif;font-size:20px;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px}
.why-card p{font-size:14px;color:var(--t2);line-height:1.6}
.how-steps{display:flex;gap:32px;margin-top:48px;counter-reset:step}
.step{flex:1;position:relative;padding:32px 24px;background:var(--bg3);border:1px solid var(--bd);border-radius:16px}
.step::before{counter-increment:step;content:counter(step);font-family:'Rajdhani',sans-serif;font-size:48px;font-weight:700;color:var(--ember);opacity:.3;position:absolute;top:16px;right:20px;line-height:1}
.step h3{font-family:'Rajdhani',sans-serif;font-size:18px;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;margin-top:8px}
.step p{font-size:14px;color:var(--t2);line-height:1.6}
.step-icon{font-size:28px}
.comm{background:var(--bg2)}
.comm-box{background:var(--bg3);border:1px solid var(--bd);border-radius:20px;padding:48px;margin-top:40px;display:flex;gap:48px;align-items:center}
.comm-left{flex:1;text-align:center}
.comm-rate{font-family:'Rajdhani',sans-serif;font-size:72px;font-weight:700;color:var(--ember);line-height:1}
.comm-rate span{font-size:32px;color:var(--t3);font-weight:500}
.comm-sub{font-size:14px;color:var(--t2);margin-top:8px}
.comm-right{flex:1}
.comm-item{display:flex;align-items:center;gap:12px;padding:12px 0;border-bottom:1px solid var(--bd)}
.comm-item:last-child{border:none}
.comm-check{color:var(--green);font-size:18px}
.comm-item span{font-size:14px;color:var(--t2)}
.login-section{padding:80px 40px;border-bottom:1px solid var(--bd)}
.login-box{max-width:420px;margin:0 auto;background:var(--bg3);border:1px solid var(--bd);border-radius:20px;padding:40px;text-align:center}
.login-box h2{font-family:'Rajdhani',sans-serif;font-size:28px;font-weight:700;text-transform:uppercase;letter-spacing:2px;margin-bottom:8px}
.login-box p{font-size:14px;color:var(--t3);margin-bottom:24px}
.form-switch{font-size:13px;color:var(--t3);margin-top:16px}
.form-switch a{color:var(--ember);cursor:pointer;font-weight:600}
.apply-section{position:relative;overflow:hidden}
.apply-glow{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:800px;height:400px;background:radial-gradient(ellipse,rgba(255,107,44,.06),transparent 70%);pointer-events:none}
.apply-form{max-width:640px;margin:40px auto 0;background:var(--bg3);border:1px solid var(--bd);border-radius:20px;padding:40px}
.apply-form h3{font-family:'Rajdhani',sans-serif;font-size:24px;font-weight:700;text-transform:uppercase;letter-spacing:2px;margin-bottom:4px}
.apply-form p{font-size:14px;color:var(--t3);margin-bottom:24px}
.form-row{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.checkbox-grid{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:6px}
.checkbox-item{display:flex;align-items:center;gap:8px;font-size:13px;color:var(--t2);cursor:pointer}
.checkbox-item input[type="checkbox"]{appearance:none;width:18px;height:18px;background:var(--bg);border:2px solid var(--smoke);border-radius:4px;cursor:pointer;transition:.2s;flex-shrink:0}
.checkbox-item input[type="checkbox"]:checked{background:var(--ember);border-color:var(--ember)}
.checkbox-item input[type="checkbox"]:checked::after{content:'‚úì';display:flex;align-items:center;justify-content:center;color:#fff;font-size:12px;font-weight:700;width:100%;height:100%}
.form-success{display:none;padding:20px;background:rgba(52,199,89,.1);border:1px solid rgba(52,199,89,.2);border-radius:12px;color:var(--green);font-weight:600;text-align:center}

/* ============ VENDOR DASHBOARD ============ */
#vendorDash{display:none}
.dash-topbar{position:fixed;top:0;left:0;right:0;z-index:100;display:flex;justify-content:space-between;align-items:center;padding:16px 32px;border-bottom:1px solid var(--bd);background:rgba(14,16,20,.95);backdrop-filter:blur(10px)}
.dash-topbar-left{display:flex;align-items:center;gap:12px}
.dash-topbar-left img{width:32px;height:32px;border-radius:8px}
.dash-topbar-left span{font-family:'Rajdhani',sans-serif;font-size:16px;font-weight:700;text-transform:uppercase;letter-spacing:2px}
.dash-topbar-left em{font-style:normal;color:var(--ember)}
.dash-topbar-right{display:flex;align-items:center;gap:16px}
.dash-user{font-size:12px;color:var(--t3)}
.btn-sm{padding:8px 16px;background:var(--smoke);border:none;border-radius:8px;font-size:12px;font-weight:600;color:var(--t2);cursor:pointer;transition:.2s}
.btn-sm:hover{background:var(--bg4);color:var(--t1)}

.dash-tabs{position:fixed;top:65px;left:0;right:0;z-index:99;display:flex;padding:0 32px;background:var(--bg2);border-bottom:1px solid var(--bd);overflow-x:auto}
.dash-tab{padding:14px 24px;font-family:'Rajdhani',sans-serif;font-size:13px;font-weight:700;text-transform:uppercase;letter-spacing:2px;color:var(--t3);cursor:pointer;border-bottom:3px solid transparent;transition:.2s;white-space:nowrap}
.dash-tab.active{color:var(--ember);border-bottom-color:var(--ember)}
.dash-tab:hover{color:var(--t1)}

.dash-content{padding:140px 32px 32px}
.dash-panel{display:none}
.dash-panel.active{display:block}

.dash-stats{display:flex;gap:16px;margin-bottom:32px;flex-wrap:wrap}
.dash-stat{flex:1;min-width:140px;background:var(--bg3);border:1px solid var(--bd);border-radius:14px;padding:20px 24px;position:relative;overflow:hidden}
.dash-stat .dv{font-family:'Rajdhani',sans-serif;font-size:36px;font-weight:700}
.dash-stat .dl{font-size:11px;text-transform:uppercase;letter-spacing:2px;color:var(--t3);margin-top:2px}
.dash-stat.ember .dv{color:var(--ember)}.dash-stat.green .dv{color:var(--green)}.dash-stat.blue .dv{color:var(--blue)}.dash-stat.amber .dv{color:var(--amber)}
.dash-stat::after{content:'';position:absolute;bottom:0;left:0;right:0;height:3px}
.dash-stat.ember::after{background:var(--ember)}.dash-stat.green::after{background:var(--green)}.dash-stat.blue::after{background:var(--blue)}.dash-stat.amber::after{background:var(--amber)}

.card{background:var(--bg3);border:1px solid var(--bd);border-radius:14px;overflow:hidden}
.card-header{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid var(--bd)}
.card-header h3{font-family:'Rajdhani',sans-serif;font-size:16px;font-weight:700;text-transform:uppercase;letter-spacing:2px}
.tbl{width:100%;border-collapse:collapse;font-size:13px}
.tbl th{text-align:left;padding:12px 16px;font-size:11px;text-transform:uppercase;letter-spacing:1px;color:var(--t3);border-bottom:1px solid var(--bd);font-weight:600;background:var(--bg2)}
.tbl td{padding:12px 16px;border-bottom:1px solid var(--bd);color:var(--t2)}
.tbl tr:hover td{background:rgba(255,255,255,.02)}

.empty-state{text-align:center;padding:60px 20px;color:var(--t3)}
.empty-state .icon{font-size:48px;margin-bottom:12px;opacity:.5}
.empty-state h4{font-family:'Rajdhani',sans-serif;font-size:20px;font-weight:700;text-transform:uppercase;letter-spacing:2px;color:var(--t2);margin-bottom:8px}
.empty-state p{font-size:13px;line-height:1.6;max-width:400px;margin:0 auto}

.product-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px;padding:20px}
.product-card{background:var(--bg2);border:1px solid var(--bd);border-radius:12px;padding:20px;transition:.2s}
.product-card:hover{border-color:rgba(255,107,44,.15)}
.product-card h4{font-family:'Rajdhani',sans-serif;font-size:16px;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:4px}
.product-card .price{font-family:'Rajdhani',sans-serif;font-size:24px;font-weight:700;color:var(--ember)}
.product-card .meta{font-size:11px;color:var(--t3);margin-top:8px}

.settings-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px}
.settings-card{background:var(--bg3);border:1px solid var(--bd);border-radius:14px;padding:24px}
.settings-card h3{font-family:'Rajdhani',sans-serif;font-size:16px;font-weight:700;text-transform:uppercase;letter-spacing:2px;margin-bottom:16px}

.btn-action{padding:8px 18px;background:var(--ember);border:none;border-radius:8px;font-family:'Rajdhani',sans-serif;font-size:12px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:#fff;cursor:pointer;transition:.2s}
.btn-action:hover{background:var(--ember2)}

@media(max-width:900px){
  nav{padding:16px 20px}.nav-links a:not(.nav-cta){display:none}
  section{padding:60px 20px}
  .why-grid{grid-template-columns:1fr}
  .how-steps{flex-direction:column}
  .comm-box{flex-direction:column;padding:32px 24px}
  .stats-bar{flex-wrap:wrap;gap:24px}
  .form-row{grid-template-columns:1fr}
  .dash-content{padding:130px 16px 16px}
  .dash-stats .dash-stat{min-width:calc(50% - 8px)}
  .settings-grid{grid-template-columns:1fr}
}
@media(max-width:600px){
  .hero h1{font-size:36px}
  .hero-ctas{flex-direction:column;align-items:center}
  .btn-main,.btn-ghost{width:100%;text-align:center}
}
</style>
</head>
<body>

<!-- ============================================================ -->
<!-- PITCH PAGE (shown to non-logged-in visitors)                  -->
<!-- ============================================================ -->
<div id="pitchPage">

<nav id="pitchNav">
  <div class="nav-logo">
    <a href="/" style="display:flex;align-items:center;gap:12px">
      <img src="../logo.png" alt="BlackStack Diesel" style="width:40px;height:40px;border-radius:8px;object-fit:contain">
      <span class="nav-brand">Black<em>Stack</em>Diesel</span>
    </a>
  </div>
  <div class="nav-links">
    <a href="#why">Why Sell</a>
    <a href="#how">How It Works</a>
    <a href="#login-section" class="nav-cta">Vendor Login</a>
  </div>
</nav>

<section class="hero">
  <div class="hero-bg"></div><div class="hero-grid"></div>
  <div class="hero-content">
    <div class="hero-badge">Vendor Portal</div>
    <h1>Sell on<br><em>Black Stack Diesel</em></h1>
    <p>List your diesel truck parts on the marketplace that matches every product to the customer's exact rig. Zero upfront fees. You only pay when we make you a sale.</p>
    <div class="hero-ctas">
      <a href="#apply" class="btn-main">Apply to Sell</a>
      <a href="#login-section" class="btn-ghost">Vendor Login</a>
    </div>
  </div>
</section>

<div class="stats-bar">
  <div class="stat"><div class="stat-val">0%</div><div class="stat-lbl">Upfront Cost</div></div>
  <div class="stat"><div class="stat-val">12%</div><div class="stat-lbl">Commission Only</div></div>
  <div class="stat"><div class="stat-val">Instant</div><div class="stat-lbl">Payouts on Ship</div></div>
  <div class="stat"><div class="stat-val">30+</div><div class="stat-lbl">Years of Trucks</div></div>
</div>

<section class="why" id="why">
  <div class="container" style="text-align:center">
    <div class="section-label">Why Sell With Us</div>
    <div class="section-title">Your Parts. Our Customers. Zero Risk.</div>
    <div class="section-desc" style="margin:0 auto">Every customer on Black Stack Diesel has already entered their exact truck. They only see parts that fit.</div>
    <div class="why-grid">
      <div class="why-card"><div class="why-icon">üí∞</div><h3>Commission Only</h3><p>No monthly fees, no listing fees, no signup cost. 12% on the part price ‚Äî that's it.</p></div>
      <div class="why-card"><div class="why-icon">üéØ</div><h3>Pre-Qualified Buyers</h3><p>Every customer has entered their exact vehicle. They're ready to buy parts that fit.</p></div>
      <div class="why-card"><div class="why-icon">‚ö°</div><h3>Instant Payouts</h3><p>Get paid the moment you confirm shipment via Stripe Connect.</p></div>
      <div class="why-card"><div class="why-icon">üöõ</div><h3>You Handle Shipping</h3><p>Set your own shipping rates. Ship directly to the customer.</p></div>
      <div class="why-card"><div class="why-icon">üß†</div><h3>AI-Powered Matching</h3><p>Our AI recommends your parts when customers describe symptoms.</p></div>
      <div class="why-card"><div class="why-icon">üìä</div><h3>Vendor Dashboard</h3><p>Track orders, view payouts, manage inventory ‚Äî all in one place.</p></div>
    </div>
  </div>
</section>

<section id="how">
  <div class="container" style="text-align:center">
    <div class="section-label">How It Works</div>
    <div class="section-title">From Application to First Sale</div>
    <div class="how-steps">
      <div class="step"><div class="step-icon">üìã</div><h3>Apply</h3><p>Fill out the vendor application below. We review within 48 hours.</p></div>
      <div class="step"><div class="step-icon">üì¶</div><h3>Import Catalog</h3><p>Upload your inventory via CSV, connect your API, or sync with major diesel distributors.</p></div>
      <div class="step"><div class="step-icon">üîî</div><h3>Get Orders</h3><p>Customer buys your part ‚Äî you get instant notification with shipping address.</p></div>
      <div class="step"><div class="step-icon">üíµ</div><h3>Get Paid</h3><p>Confirm shipment with tracking. Get paid immediately. 12% deducted automatically.</p></div>
    </div>
  </div>
</section>

<section class="comm" id="pricing">
  <div class="container" style="text-align:center">
    <div class="section-label">Transparent Pricing</div>
    <div class="section-title">Simple. No Surprises.</div>
    <div class="comm-box">
      <div class="comm-left"><div class="comm-rate">12<span>%</span></div><div class="comm-sub">Commission per sale on part price</div></div>
      <div class="comm-right">
        <div class="comm-item"><span class="comm-check">‚úì</span><span>No monthly fees or subscriptions</span></div>
        <div class="comm-item"><span class="comm-check">‚úì</span><span>No listing fees ‚Äî list unlimited products</span></div>
        <div class="comm-item"><span class="comm-check">‚úì</span><span>Commission on part price only, not shipping</span></div>
        <div class="comm-item"><span class="comm-check">‚úì</span><span>Instant payout when shipment confirmed</span></div>
        <div class="comm-item"><span class="comm-check">‚úì</span><span>You set your own prices and shipping rates</span></div>
        <div class="comm-item"><span class="comm-check">‚úì</span><span>Stripe processing fees included in commission</span></div>
      </div>
    </div>
  </div>
</section>

<section class="login-section" id="login-section">
  <div class="login-box">
    <h2>Vendor Login</h2>
    <p>Access your dashboard, orders, and payouts</p>
    <div class="form-err" id="loginErr"></div>
    <div class="fg"><label>Email</label><input class="fi" type="email" id="loginEmail" placeholder="you@company.com"></div>
    <div class="fg"><label>Password</label><input class="fi" type="password" id="loginPw" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" onkeydown="if(event.key==='Enter')vendorLogin()"></div>
    <button class="form-btn" onclick="vendorLogin()">Sign In</button>
    <div class="form-switch">Don't have an account? <a href="#apply">Apply to sell</a></div>
  </div>
</section>

<section class="apply-section" id="apply">
  <div class="apply-glow"></div>
  <div class="container" style="text-align:center">
    <div class="section-label">Get Started</div>
    <div class="section-title">Apply to Sell on Black Stack Diesel</div>
    <div class="section-desc" style="margin:0 auto">Fill out the form below. We review every application within 48 hours.</div>
  </div>
  <div class="apply-form" id="applyForm">
    <h3>Vendor Application</h3><p>All fields marked * are required</p>
    <div class="form-err" id="applyErr"></div>
    <div class="form-row">
      <div class="fg"><label>Business Name *</label><input class="fi" type="text" id="appBiz" placeholder="Your Company LLC"></div>
      <div class="fg"><label>Contact Name *</label><input class="fi" type="text" id="appName" placeholder="John Smith"></div>
    </div>
    <div class="form-row">
      <div class="fg"><label>Email *</label><input class="fi" type="email" id="appEmail" placeholder="you@company.com"></div>
      <div class="fg"><label>Phone</label><input class="fi" type="tel" id="appPhone" placeholder="(555) 555-5555"></div>
    </div>
    <div class="fg"><label>Website</label><input class="fi" type="url" id="appWeb" placeholder="https://yoursite.com"></div>
    <div class="fg"><label>Business Type *</label><select class="fi" id="appType"><option value="">Select...</option><option value="distributor">Distributor / Wholesaler</option><option value="manufacturer">Manufacturer</option><option value="retailer">Retailer / Dealer</option><option value="shop">Diesel Shop / Installer</option><option value="other">Other</option></select></div>
    <div class="fg"><label>Product Categories</label>
      <div class="checkbox-grid">
        <label class="checkbox-item"><input type="checkbox" value="Injectors"> Injectors</label>
        <label class="checkbox-item"><input type="checkbox" value="Turbos"> Turbos</label>
        <label class="checkbox-item"><input type="checkbox" value="Fuel Systems"> Fuel Systems</label>
        <label class="checkbox-item"><input type="checkbox" value="Exhaust"> Exhaust</label>
        <label class="checkbox-item"><input type="checkbox" value="Engine Parts"> Engine Parts</label>
        <label class="checkbox-item"><input type="checkbox" value="Transmission"> Transmission</label>
        <label class="checkbox-item"><input type="checkbox" value="Filters"> Filters / Fluids</label>
        <label class="checkbox-item"><input type="checkbox" value="Electrical"> Electrical</label>
        <label class="checkbox-item"><input type="checkbox" value="DPF/DEF"> DPF / DEF / Emissions</label>
        <label class="checkbox-item"><input type="checkbox" value="Suspension"> Suspension / Lift</label>
        <label class="checkbox-item"><input type="checkbox" value="Accessories"> Accessories</label>
        <label class="checkbox-item"><input type="checkbox" value="Other"> Other</label>
      </div>
    </div>
    <div class="fg"><label>Estimated SKUs</label><select class="fi" id="appSkus"><option value="">How many products?</option><option value="1-50">1 ‚Äì 50</option><option value="51-200">51 ‚Äì 200</option><option value="201-1000">201 ‚Äì 1,000</option><option value="1000+">1,000+</option></select></div>
    <div class="fg"><label>Anything else?</label><textarea class="fi" id="appMsg" placeholder="Tell us about your business..."></textarea></div>
    <button class="form-btn" id="applyBtn" onclick="handleApply()">Submit Application</button>
  </div>
  <div class="form-success" id="applySuccess" style="max-width:640px;margin:40px auto 0">
    <div style="font-size:28px;margin-bottom:8px">üéâ</div>
    <div style="font-size:20px;margin-bottom:8px">Application Received!</div>
    <div style="font-weight:400;color:var(--t2)">We'll review your application and get back to you within 48 hours.</div>
  </div>
</section>

<footer>
  <div class="footer-brand"><img src="../logo.png" alt="BSD" style="width:32px;height:32px;border-radius:6px;object-fit:contain"><span>Black Stack Diesel</span></div>
  <div class="footer-links"><a href="/">Home</a><a href="#why">Why Sell</a><a href="#apply">Apply</a><a href="#" onclick="return false" style="cursor:default;opacity:.5">Contact (Coming Soon)</a></div>
  <div class="footer-legal">¬© 2026 Dynamic Innovative Solutions LLC. All rights reserved. Black Stack Diesel‚Ñ¢</div>
</footer>

</div><!-- end pitchPage -->


<!-- ============================================================ -->
<!-- VENDOR DASHBOARD (shown after login)                          -->
<!-- ============================================================ -->
<div id="vendorDash">

  <div class="dash-topbar">
    <div class="dash-topbar-left">
      <img src="../logo.png" alt="BSD">
      <span>Black<em>Stack</em> Vendor</span>
    </div>
    <div class="dash-topbar-right">
      <span class="dash-user" id="dashUser"></span>
      <button class="btn-sm" onclick="vendorLogout()">Sign Out</button>
    </div>
  </div>

  <div class="dash-tabs">
    <div class="dash-tab active" onclick="dashTab('overview',this)">Overview</div>
    <div class="dash-tab" onclick="dashTab('orders',this)">Orders</div>
    <div class="dash-tab" onclick="dashTab('products',this)">Products</div>
    <div class="dash-tab" onclick="dashTab('payouts',this)">Payouts</div>
    <div class="dash-tab" onclick="dashTab('settings',this)">Settings</div>
  </div>

  <div class="dash-content">

    <!-- OVERVIEW -->
    <div class="dash-panel active" id="dp-overview">
      <div class="dash-stats">
        <div class="dash-stat green"><div class="dv">$0.00</div><div class="dl">Total Earnings</div></div>
        <div class="dash-stat ember"><div class="dv">0</div><div class="dl">Total Orders</div></div>
        <div class="dash-stat blue"><div class="dv">0</div><div class="dl">Products Listed</div></div>
        <div class="dash-stat amber"><div class="dv">$0.00</div><div class="dl">Pending Payout</div></div>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px">
        <div class="card">
          <div class="card-header"><h3>Recent Orders</h3></div>
          <div class="empty-state"><div class="icon">üì¶</div><h4>No Orders Yet</h4><p>When customers buy your parts, orders will appear here. Make sure your products are listed and priced competitively.</p></div>
        </div>
        <div class="card">
          <div class="card-header"><h3>Quick Actions</h3></div>
          <div style="padding:20px;display:flex;flex-direction:column;gap:12px">
            <button class="btn-action" onclick="dashTab('products',document.querySelectorAll('.dash-tab')[2])" style="width:100%;height:48px;font-size:14px">üì• Import Inventory</button>
            <button class="btn-action" onclick="dashTab('orders',document.querySelectorAll('.dash-tab')[1])" style="width:100%;height:48px;font-size:14px;background:var(--smoke);color:var(--t2)">üìã View All Orders</button>
            <button class="btn-action" onclick="dashTab('settings',document.querySelectorAll('.dash-tab')[4])" style="width:100%;height:48px;font-size:14px;background:var(--smoke);color:var(--t2)">‚öôÔ∏è Update Profile</button>
          </div>
        </div>
      </div>
    </div>

    <!-- ORDERS -->
    <div class="dash-panel" id="dp-orders">
      <div class="dash-stats">
        <div class="dash-stat amber"><div class="dv">0</div><div class="dl">Pending</div></div>
        <div class="dash-stat blue"><div class="dv">0</div><div class="dl">Processing</div></div>
        <div class="dash-stat green"><div class="dv">0</div><div class="dl">Shipped</div></div>
        <div class="dash-stat ember"><div class="dv">0</div><div class="dl">Total</div></div>
      </div>
      <div class="card">
        <div class="card-header"><h3>All Orders</h3></div>
        <div class="empty-state"><div class="icon">üì¶</div><h4>No Orders Yet</h4><p>Orders will appear here when customers purchase your parts. You'll receive a notification with the order details and shipping address.</p></div>
      </div>
    </div>

    <!-- PRODUCTS / INVENTORY -->
    <div class="dash-panel" id="dp-products">
      <div class="dash-stats">
        <div class="dash-stat blue"><div class="dv" id="productCount">0</div><div class="dl">Total Products</div></div>
        <div class="dash-stat green"><div class="dv" id="activeCount">0</div><div class="dl">Active</div></div>
        <div class="dash-stat amber"><div class="dv" id="syncStatus">‚Äî</div><div class="dl">Last Sync</div></div>
      </div>

      <!-- IMPORT METHODS -->
      <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px;margin-bottom:24px">

        <!-- CSV UPLOAD -->
        <div class="card" style="cursor:pointer" onclick="document.getElementById('csvFile').click()">
          <div style="padding:28px;text-align:center">
            <div style="font-size:36px;margin-bottom:12px">üìÑ</div>
            <h3 style="font-family:'Rajdhani',sans-serif;font-size:18px;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:6px">CSV Upload</h3>
            <p style="font-size:13px;color:var(--t2);line-height:1.6">Drop in any CSV ‚Äî we auto-detect your columns. No mapping needed.</p>
            <div style="margin-top:16px;padding:8px 20px;border-radius:8px;background:var(--ember);color:#fff;font-family:'Rajdhani',sans-serif;font-size:13px;font-weight:700;text-transform:uppercase;letter-spacing:2px;display:inline-block">Upload CSV</div>
          </div>
        </div>
        <input type="file" id="csvFile" accept=".csv,.tsv,.txt" style="display:none" onchange="handleCSV(this)">

        <!-- API INTEGRATION -->
        <div class="card">
          <div style="padding:28px;text-align:center">
            <div style="font-size:36px;margin-bottom:12px">üîó</div>
            <h3 style="font-family:'Rajdhani',sans-serif;font-size:18px;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:6px">API Integration</h3>
            <p style="font-size:13px;color:var(--t2);line-height:1.6">Push products directly from your system using your unique API key and our REST endpoint.</p>
            <div style="margin-top:16px;padding:8px 20px;border-radius:8px;background:var(--smoke);color:var(--t1);font-family:'Rajdhani',sans-serif;font-size:13px;font-weight:700;text-transform:uppercase;letter-spacing:2px;display:inline-block;cursor:pointer" onclick="showApiPanel()">View API Key</div>
          </div>
        </div>

        <!-- DISTRIBUTOR SYNC -->
        <div class="card">
          <div style="padding:28px;text-align:center">
            <div style="font-size:36px;margin-bottom:12px">üîÑ</div>
            <h3 style="font-family:'Rajdhani',sans-serif;font-size:18px;font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-bottom:6px">Distributor Sync</h3>
            <p style="font-size:13px;color:var(--t2);line-height:1.6">Auto-sync inventory from APG, Meyer, Turn 14, or other diesel parts distributors.</p>
            <div style="margin-top:16px;padding:8px 20px;border-radius:8px;background:var(--smoke);color:var(--t1);font-family:'Rajdhani',sans-serif;font-size:13px;font-weight:700;text-transform:uppercase;letter-spacing:2px;display:inline-block;cursor:pointer" onclick="showDistPanel()">Connect</div>
          </div>
        </div>
      </div>

      <!-- CSV PREVIEW (hidden until CSV uploaded) -->
      <div class="card" id="csvMapper" style="display:none;margin-bottom:20px">
        <div class="card-header"><h3>üìÑ CSV Preview</h3><button class="btn-sm" onclick="cancelCSV()">‚úï Cancel</button></div>
        <div style="padding:24px">
          <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px">
            <div style="padding:8px 16px;border-radius:8px;background:rgba(52,211,153,.08);border:1px solid rgba(52,211,153,.15);font-size:13px;color:#34D399"><strong id="csvRowCount">0</strong> products detected</div>
            <div style="padding:8px 16px;border-radius:8px;background:rgba(74,158,255,.08);border:1px solid rgba(74,158,255,.15);font-size:13px;color:#4A9EFF"><strong id="csvColCount">0</strong> columns matched</div>
          </div>
          <div class="form-err" id="csvErr"></div>
          <div style="overflow-x:auto;margin-bottom:16px;border-radius:10px;border:1px solid var(--bd)">
            <table style="width:100%;border-collapse:collapse;font-size:12px" id="csvPreviewTable">
            </table>
          </div>
          <div id="csvWarnings" style="display:none;margin-bottom:16px;padding:12px 16px;border-radius:10px;background:rgba(251,191,36,.06);border:1px solid rgba(251,191,36,.12)">
            <p style="font-size:12px;color:#FBBF24" id="csvWarningText"></p>
          </div>
          <button class="form-btn" onclick="importCSV()" id="csvImportBtn">Import <span id="csvImportCount">0</span> Products</button>
        </div>
      </div>

      <!-- API PANEL (hidden) -->
      <div class="card" id="apiPanel" style="display:none;margin-bottom:20px">
        <div class="card-header"><h3>API Integration</h3><button class="btn-sm" onclick="hideApiPanel()">‚úï Close</button></div>
        <div style="padding:24px">
          <div style="margin-bottom:20px">
            <label style="font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:1px;color:var(--t3);display:block;margin-bottom:6px">Your Vendor API Key</label>
            <div style="display:flex;gap:8px">
              <input class="fi" type="text" id="apiKeyField" readonly style="font-family:monospace;font-size:13px;letter-spacing:.5px;color:var(--ember)">
              <button class="btn-action" style="flex-shrink:0;white-space:nowrap" onclick="copyApiKey()">üìã Copy</button>
            </div>
            <p style="font-size:11px;color:var(--t3);margin-top:6px">Keep this key secret. It authenticates all API requests for your account.</p>
          </div>
          <div style="margin-bottom:20px">
            <label style="font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:1px;color:var(--t3);display:block;margin-bottom:6px">API Endpoint</label>
            <div style="padding:14px;border-radius:10px;background:var(--bg);border:1px solid var(--smoke);font-family:monospace;font-size:13px;color:var(--t1)">POST https://black-stack-diesel.com/api/v1/products</div>
          </div>
          <div style="margin-bottom:20px">
            <label style="font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:1px;color:var(--t3);display:block;margin-bottom:10px">Example Request</label>
            <pre style="padding:16px;border-radius:10px;background:var(--bg);border:1px solid var(--smoke);font-size:12px;color:var(--t2);overflow-x:auto;line-height:1.7;white-space:pre-wrap">curl -X POST https://black-stack-diesel.com/api/v1/products \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "products": [
      {
        "product_name": "FASS Titanium 150GPH",
        "sku": "TS-F14-150G",
        "brand": "FASS Fuel Systems",
        "price": 549.99,
        "shipping_cost": 29.99,
        "stock_qty": 25,
        "category": "Fuel Systems",
        "condition": "new",
        "fitment": "2003-2007 Dodge Ram 5.9L Cummins",
        "description": "Titanium Signature Series...",
        "image_url": "https://...",
        "weight_lbs": 12.5
      }
    ]
  }'</pre>
          </div>
          <div>
            <label style="font-size:11px;font-weight:600;text-transform:uppercase;letter-spacing:1px;color:var(--t3);display:block;margin-bottom:10px">Bulk Actions</label>
            <div style="display:flex;gap:8px;flex-wrap:wrap">
              <div style="padding:10px 16px;border-radius:8px;background:var(--bg);border:1px solid var(--smoke);font-size:12px;color:var(--t2)"><strong>POST</strong> /products ‚Äî Create / update products</div>
              <div style="padding:10px 16px;border-radius:8px;background:var(--bg);border:1px solid var(--smoke);font-size:12px;color:var(--t2)"><strong>PATCH</strong> /products/:sku ‚Äî Update stock / price</div>
              <div style="padding:10px 16px;border-radius:8px;background:var(--bg);border:1px solid var(--smoke);font-size:12px;color:var(--t2)"><strong>DELETE</strong> /products/:sku ‚Äî Remove listing</div>
              <div style="padding:10px 16px;border-radius:8px;background:var(--bg);border:1px solid var(--smoke);font-size:12px;color:var(--t2)"><strong>GET</strong> /products ‚Äî List your products</div>
            </div>
          </div>
        </div>
      </div>

      <!-- DISTRIBUTOR PANEL (hidden) -->
      <div class="card" id="distPanel" style="display:none;margin-bottom:20px">
        <div class="card-header"><h3>Distributor Sync</h3><button class="btn-sm" onclick="hideDistPanel()">‚úï Close</button></div>
        <div style="padding:24px">
          <p style="font-size:13px;color:var(--t2);margin-bottom:20px">Connect your distributor account to auto-import and sync inventory. Pricing, stock levels, and fitment data update automatically.</p>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px" id="distList">
            <div class="dist-card" onclick="connectDist('apg')">
              <div class="dist-top"><strong>APG Wholesale</strong><span class="badge badge-new">Ready</span></div>
              <p>Auto-sync diesel parts catalog. Requires dealer account.</p>
              <div class="dist-fields" id="dist-apg" style="display:none">
                <div class="fg"><label>Dealer Account #</label><input class="fi" type="text" id="apgAcct" placeholder="APG-XXXXXX"></div>
                <div class="fg"><label>API Key</label><input class="fi" type="text" id="apgKey" placeholder="Your APG API key"></div>
                <button class="form-btn" onclick="saveDist('apg')" style="margin-top:4px">Connect APG</button>
              </div>
            </div>
            <div class="dist-card" onclick="connectDist('meyer')">
              <div class="dist-top"><strong>Meyer Distributing</strong><span class="badge badge-pending">Coming Soon</span></div>
              <p>Truck accessories and performance parts.</p>
            </div>
            <div class="dist-card" onclick="connectDist('turn14')">
              <div class="dist-top"><strong>Turn 14 Distribution</strong><span class="badge badge-pending">Coming Soon</span></div>
              <p>Performance diesel parts from 800+ brands.</p>
            </div>
            <div class="dist-card" onclick="connectDist('custom')">
              <div class="dist-top"><strong>Custom / Other</strong><span class="badge badge-new">Ready</span></div>
              <p>Connect any system that exports CSV, XML, or JSON feeds.</p>
              <div class="dist-fields" id="dist-custom" style="display:none">
                <div class="fg"><label>Feed URL</label><input class="fi" type="url" id="customFeedUrl" placeholder="https://your-system.com/feed.csv"></div>
                <div class="fg"><label>Feed Format</label><select class="fi" id="customFeedFmt"><option value="csv">CSV</option><option value="json">JSON</option><option value="xml">XML</option></select></div>
                <div class="fg"><label>Sync Frequency</label><select class="fi" id="customFeedFreq"><option value="daily">Daily</option><option value="12h">Every 12 Hours</option><option value="6h">Every 6 Hours</option><option value="hourly">Hourly</option></select></div>
                <button class="form-btn" onclick="saveDist('custom')" style="margin-top:4px">Save Feed</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- PRODUCT LIST TABLE -->
      <div class="card">
        <div class="card-header">
          <h3>Your Products</h3>
          <div style="display:flex;gap:8px">
            <input class="fi" type="text" id="prodSearch" placeholder="Search SKU or name..." style="width:240px;height:38px;font-size:13px" oninput="filterProducts()">
          </div>
        </div>
        <div id="productList">
          <div class="empty-state"><div class="icon">üîß</div><h4>No Products Listed</h4><p>Import your catalog using CSV, API, or distributor sync above to get started.</p></div>
        </div>
      </div>
    </div>

    <!-- PAYOUTS -->
    <div class="dash-panel" id="dp-payouts">
      <div class="dash-stats">
        <div class="dash-stat green"><div class="dv">$0.00</div><div class="dl">Total Earned</div></div>
        <div class="dash-stat ember"><div class="dv">$0.00</div><div class="dl">Commission Paid</div></div>
        <div class="dash-stat blue"><div class="dv">$0.00</div><div class="dl">Net Payouts</div></div>
        <div class="dash-stat amber"><div class="dv">‚Äî</div><div class="dl">Stripe Status</div></div>
      </div>
      <div class="card">
        <div class="card-header"><h3>Payout History</h3></div>
        <div class="empty-state">
          <div class="icon">üíµ</div>
          <h4>No Payouts Yet</h4>
          <p>Your payout history will appear here once you complete your first sale and confirm shipment. Payouts are instant via Stripe Connect.</p>
          <br>
          <button class="btn-action" style="opacity:.5;cursor:not-allowed">Connect Stripe Account (Coming Soon)</button>
        </div>
      </div>
    </div>

    <!-- SETTINGS -->
    <div class="dash-panel" id="dp-settings">
      <div class="settings-grid">
        <div class="settings-card">
          <h3>Business Information</h3>
          <div class="fg"><label>Business Name</label><input class="fi" type="text" id="setBiz" disabled></div>
          <div class="fg"><label>Contact Name</label><input class="fi" type="text" id="setContact" disabled></div>
          <div class="fg"><label>Email</label><input class="fi" type="email" id="setEmail" disabled></div>
          <div class="fg"><label>Phone</label><input class="fi" type="tel" id="setPhone"></div>
          <div class="fg"><label>Website</label><input class="fi" type="url" id="setWeb"></div>
          <button class="form-btn" onclick="saveSettings()" style="margin-top:4px">Save Changes</button>
        </div>
        <div class="settings-card">
          <h3>Account</h3>
          <div style="padding:8px 0">
            <div style="display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid var(--bd)">
              <div><div style="font-size:13px;color:var(--t1);font-weight:600">Commission Rate</div><div style="font-size:12px;color:var(--t3)">Applied to each sale</div></div>
              <div style="font-family:'Rajdhani',sans-serif;font-size:24px;font-weight:700;color:var(--ember)">12%</div>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid var(--bd)">
              <div><div style="font-size:13px;color:var(--t1);font-weight:600">Payout Speed</div><div style="font-size:12px;color:var(--t3)">After shipment confirmed</div></div>
              <div style="font-family:'Rajdhani',sans-serif;font-size:24px;font-weight:700;color:var(--green)">Instant</div>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid var(--bd)">
              <div><div style="font-size:13px;color:var(--t1);font-weight:600">Stripe Connect</div><div style="font-size:12px;color:var(--t3)">Payment processing</div></div>
              <span class="badge badge-pending">Not Connected</span>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;padding:12px 0">
              <div><div style="font-size:13px;color:var(--t1);font-weight:600">Account Status</div><div style="font-size:12px;color:var(--t3)">Vendor account</div></div>
              <span class="badge badge-active">Active</span>
            </div>
          </div>
          <h3 style="margin-top:24px">Change Password</h3>
          <div class="fg"><label>New Password</label><input class="fi" type="password" id="setNewPw" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"></div>
          <div class="fg"><label>Confirm Password</label><input class="fi" type="password" id="setConfPw" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"></div>
          <button class="form-btn" onclick="changePassword()">Update Password</button>
        </div>
      </div>
    </div>

  </div>
</div><!-- end vendorDash -->


<script>
var SUPA_URL='https://jfjbilfsiebifzddveof.supabase.co';
var SUPA_ANON='eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpmamJpbGZzaWViaWZ6ZGR2ZW9mIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE2OTg4ODUsImV4cCI6MjA4NzI3NDg4NX0.bbTQ0l4HsHoKUzoKACBvbXJ0TbnUM5tltK4YLKyuMr8';
var sb=supabase.createClient(SUPA_URL,SUPA_ANON);
var vendorData=null;

// ===== CHECK SESSION ON LOAD =====
(async function(){
  var r=await sb.auth.getSession();
  if(r.data.session){
    var user=r.data.session.user;
    var meta=user.user_metadata||{};
    if(meta.role==='vendor'){
      await loadVendorDash(user);
    }
  }
})();

// ===== VENDOR LOGIN =====
async function vendorLogin(){
  var email=document.getElementById('loginEmail').value.trim();
  var pw=document.getElementById('loginPw').value;
  var errEl=document.getElementById('loginErr');
  if(!email||!pw){errEl.textContent='Enter email and password.';errEl.style.display='block';return}
  errEl.style.display='none';
  var r=await sb.auth.signInWithPassword({email:email,password:pw});
  if(r.error){errEl.textContent=r.error.message;errEl.style.display='block';return}
  var meta=r.data.user.user_metadata||{};
  if(meta.role!=='vendor'){errEl.textContent='This account is not a vendor account.';errEl.style.display='block';await sb.auth.signOut();return}
  await loadVendorDash(r.data.user);
}

async function vendorLogout(){
  await sb.auth.signOut();
  vendorData=null;
  document.getElementById('vendorDash').style.display='none';
  document.getElementById('pitchPage').style.display='block';
  window.scrollTo(0,0);
}

async function loadVendorDash(user){
  // Get vendor data
  var r=await sb.from('vendors').select('*').eq('email',user.email).single();
  if(r.data)vendorData=r.data;

  // Switch views
  document.getElementById('pitchPage').style.display='none';
  document.getElementById('vendorDash').style.display='block';

  // Fill dashboard
  var name=vendorData?vendorData.business_name:(user.user_metadata.business_name||user.email);
  document.getElementById('dashUser').textContent=name;

  // Fill settings
  if(vendorData){
    document.getElementById('setBiz').value=vendorData.business_name||'';
    document.getElementById('setContact').value=vendorData.contact_name||'';
    document.getElementById('setEmail').value=vendorData.email||'';
    document.getElementById('setPhone').value=vendorData.phone||'';
    document.getElementById('setWeb').value=vendorData.website||'';
    // Load existing products
    var pr=await sb.from('products').select('*').eq('vendor_id',vendorData.id).eq('status','active');
    if(pr.data&&pr.data.length>0){
      showImportedProducts(pr.data);
      document.getElementById('productCount').textContent=pr.data.length;
    }
  }
  window.scrollTo(0,0);
}

// ===== DASHBOARD TABS =====
function dashTab(id,el){
  document.querySelectorAll('.dash-tab').forEach(function(t){t.classList.remove('active')});
  document.querySelectorAll('.dash-panel').forEach(function(p){p.classList.remove('active')});
  el.classList.add('active');
  document.getElementById('dp-'+id).classList.add('active');
}

// ===== CSV UPLOAD (Smart Auto-Detect) =====
var csvData=null,csvHeaders=[],csvMapping={};

// Smart column matching ‚Äî maps common header variations to our fields
var headerAliases={
  product_name:['product_name','name','product name','product','title','item','item name','item_name','part','part name','part_name','description_short'],
  sku:['sku','part_number','part number','partnumber','item_number','item number','upc','mpn','mfr_part','mfr part','product_id','id','item_id','catalog_number'],
  brand:['brand','manufacturer','mfg','make','vendor','brand_name','mfr','supplier'],
  price:['price','retail','retail_price','retail price','msrp','sell','sell_price','unit_price','amount','cost_price','sale_price','list_price'],
  shipping_cost:['shipping_cost','shipping','ship_cost','freight','shipping_price','delivery_cost'],
  stock_qty:['stock_qty','qty','quantity','stock','in_stock','inventory','available','on_hand','count','units'],
  category:['category','type','product_type','product type','department','class','group','product_category'],
  condition:['condition','status','product_condition','state'],
  fitment:['fitment','engine_compatibility','engine','compatibility','fits','vehicle','application','fit','engines','makes_models','fitment_text'],
  description:['description','desc','product_description','long_description','details','notes','info','about','summary'],
  image_url:['image_url','image','img','photo','picture','thumbnail','image_link','img_url','photo_url','main_image'],
  weight_lbs:['weight_lbs','weight','lbs','ship_weight','package_weight','wt'],
  stage:['stage','performance_stage','build_stage','level']
};

function matchHeader(h){
  var clean=h.toLowerCase().trim().replace(/[\s\-]+/g,'_').replace(/[^a-z0-9_]/g,'');
  for(var field in headerAliases){
    for(var i=0;i<headerAliases[field].length;i++){
      if(clean===headerAliases[field][i].replace(/[\s\-]+/g,'_'))return field;
    }
  }
  return null;
}

function handleCSV(input){
  var file=input.files[0];if(!file)return;
  var reader=new FileReader();
  reader.onload=function(e){
    var text=e.target.result;
    // Handle quoted fields with commas inside
    var lines=[];var current='';var inQuote=false;
    for(var c=0;c<text.length;c++){
      var ch=text[c];
      if(ch==='"')inQuote=!inQuote;
      else if((ch==='\n'||ch==='\r')&&!inQuote){if(current.trim())lines.push(current);current=''}
      else current+=ch;
    }
    if(current.trim())lines.push(current);
    if(lines.length<2){alert('CSV needs at least a header row and one data row.');return}
    var delim=lines[0].indexOf('\t')>-1?'\t':',';
    csvHeaders=lines[0].split(delim).map(function(h){return h.trim().replace(/^"|"$/g,'')});
    csvData=[];
    for(var i=1;i<lines.length;i++){
      var vals=lines[i].split(delim).map(function(v){return v.trim().replace(/^"|"$/g,'')});
      if(vals.length>=2)csvData.push(vals);
    }
    // Auto-match columns
    csvMapping={};
    var matched=0,warnings=[];
    csvHeaders.forEach(function(h,idx){
      var field=matchHeader(h);
      if(field){csvMapping[field]=idx;matched++}
    });
    // Validate required fields
    if(!csvMapping.hasOwnProperty('product_name')&&!csvMapping.hasOwnProperty('sku')){
      warnings.push('Could not detect a product name or SKU column. Import may not work correctly.');
    }
    if(!csvMapping.hasOwnProperty('price')){
      warnings.push('Could not detect a price column.');
    }
    // Count valid products
    var validCount=0;
    csvData.forEach(function(row){
      var hasName=(csvMapping.product_name!==undefined&&row[csvMapping.product_name])||(csvMapping.sku!==undefined&&row[csvMapping.sku]);
      var hasPrice=csvMapping.price!==undefined&&parseFloat(row[csvMapping.price])>0;
      if(hasName&&hasPrice)validCount++;
    });

    document.getElementById('csvRowCount').textContent=validCount;
    document.getElementById('csvColCount').textContent=matched;
    document.getElementById('csvImportCount').textContent=validCount;

    // Build preview table
    var mappedFields=Object.keys(csvMapping);
    var thtml='<thead><tr>';
    mappedFields.forEach(function(f){thtml+='<th style="padding:10px 14px;text-align:left;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--ember);background:var(--bg2);border-bottom:1px solid var(--bd);white-space:nowrap">'+f.replace(/_/g,' ')+'</th>'});
    thtml+='</tr></thead><tbody>';
    var previewRows=Math.min(csvData.length,5);
    for(var r=0;r<previewRows;r++){
      thtml+='<tr>';
      mappedFields.forEach(function(f){
        var val=csvData[r][csvMapping[f]]||'‚Äî';
        if(val.length>40)val=val.substring(0,40)+'‚Ä¶';
        if(f==='price'||f==='shipping_cost')val=parseFloat(val)?'$'+parseFloat(val).toFixed(2):(val||'‚Äî');
        thtml+='<td style="padding:8px 14px;font-size:12px;color:var(--t2);border-bottom:1px solid var(--bd);white-space:nowrap">'+val+'</td>';
      });
      thtml+='</tr>';
    }
    if(csvData.length>5)thtml+='<tr><td colspan="'+mappedFields.length+'" style="padding:10px 14px;font-size:12px;color:var(--t3);text-align:center;font-style:italic">‚Ä¶and '+(csvData.length-5)+' more rows</td></tr>';
    thtml+='</tbody>';
    document.getElementById('csvPreviewTable').innerHTML=thtml;

    // Show warnings if any
    if(warnings.length>0){
      document.getElementById('csvWarningText').innerHTML='‚ö†Ô∏è '+warnings.join('<br>‚ö†Ô∏è ');
      document.getElementById('csvWarnings').style.display='block';
    }else{
      document.getElementById('csvWarnings').style.display='none';
    }

    document.getElementById('csvMapper').style.display='block';
    document.getElementById('csvMapper').scrollIntoView({behavior:'smooth'});
  };
  reader.readAsText(file);
  input.value='';
}

function cancelCSV(){csvData=null;csvHeaders=[];csvMapping={};document.getElementById('csvMapper').style.display='none'}

function importCSV(){
  if(!csvMapping.hasOwnProperty('price')){
    document.getElementById('csvErr').textContent='Cannot import without a price column detected.';
    document.getElementById('csvErr').style.display='block';return;
  }
  document.getElementById('csvErr').style.display='none';
  var products=[];
  csvData.forEach(function(row){
    var p={};
    Object.keys(csvMapping).forEach(function(f){p[f]=row[csvMapping[f]]||null});
    // If no product_name but has sku, use sku as name
    if(!p.product_name&&p.sku)p.product_name=p.sku;
    if(p.price)p.price=parseFloat(p.price)||0;
    if(p.shipping_cost)p.shipping_cost=parseFloat(p.shipping_cost)||0;
    if(p.stock_qty)p.stock_qty=parseInt(p.stock_qty)||0;
    if(p.weight_lbs)p.weight_lbs=parseFloat(p.weight_lbs)||0;
    // Map stage text to smallint
    if(p.stage){var sm=String(p.stage).replace(/[^0-9]/g,'');p.stage=([1,2,3].indexOf(parseInt(sm))>-1)?parseInt(sm):null}
    // Map fitment to fitment_text
    if(p.fitment&&!p.fitment_text){p.fitment_text=p.fitment;delete p.fitment}
    if(p.product_name&&p.price>0)products.push(p);
  });
  if(products.length===0){
    document.getElementById('csvErr').textContent='No valid products found. Each row needs at least a name and price > $0.';
    document.getElementById('csvErr').style.display='block';return;
  }
  var btn=document.getElementById('csvImportBtn');btn.textContent='Importing...';btn.disabled=true;

  // Allowed columns in the products table
  var allowedCols=['product_name','sku','brand','price','shipping_cost','stock_qty','category','condition','stage','fitment_text','fitment_makes','fitment_engines','description','image_url','image_urls','weight_lbs','source','source_ref','status','vendor_id'];

  // Insert into Supabase if vendor is logged in
  if(vendorData&&vendorData.id){
    var rows=products.map(function(p){
      // Clean and transform fields
      var clean={};
      clean.vendor_id=vendorData.id;
      clean.product_name=p.product_name;
      if(p.sku)clean.sku=String(p.sku);
      if(p.brand)clean.brand=p.brand;
      clean.price=parseFloat(p.price)||0;
      if(p.shipping_cost)clean.shipping_cost=parseFloat(p.shipping_cost)||0;
      if(p.stock_qty)clean.stock_qty=parseInt(p.stock_qty)||0;
      if(p.category)clean.category=p.category;
      if(p.condition&&['new','remanufactured','used'].indexOf(p.condition.toLowerCase())>-1)clean.condition=p.condition.toLowerCase();
      if(p.stage){var sn=parseInt(String(p.stage).replace(/[^0-9]/g,''));if([1,2,3].indexOf(sn)>-1)clean.stage=sn}
      if(p.fitment_text)clean.fitment_text=p.fitment_text;
      else if(p.fitment)clean.fitment_text=p.fitment;
      if(p.description)clean.description=p.description;
      if(p.image_url)clean.image_url=p.image_url;
      if(p.weight_lbs)clean.weight_lbs=parseFloat(p.weight_lbs)||null;
      else if(p.weight)clean.weight_lbs=parseFloat(p.weight)||null;
      clean.source='csv';
      clean.status='active';
      return clean;
    });
    console.log('Inserting',rows.length,'products into Supabase:',JSON.stringify(rows[0]));
    sb.from('products').insert(rows).then(function(res){
      if(res.error){
        console.error('Supabase insert error:',res.error);
        showImportedProducts(products);
        alert('Import issue: '+res.error.message+'\n\nProducts shown locally but NOT saved to database. Check console for details.');
      }else{
        showImportedProducts(products);
        document.getElementById('productCount').textContent=products.length;
        alert(products.length+' products imported and saved to database!');
      }
      cancelCSV();btn.textContent='Import Products';btn.disabled=false;
    });
  }else{
    // No vendor session
    showImportedProducts(products);
    alert(products.length+' products parsed locally.\n\nNot saved ‚Äî you must be logged in as an approved vendor to save to database.');
    cancelCSV();btn.textContent='Import Products';btn.disabled=false;
  }
}

function showImportedProducts(products){
  var html='<div class="product-grid">';
  products.forEach(function(p){
    html+='<div class="product-card">';
    html+='<h4>'+p.product_name+'</h4>';
    html+='<div class="price">$'+(p.price||0).toLocaleString(undefined,{minimumFractionDigits:2,maximumFractionDigits:2})+'</div>';
    html+='<div class="meta">';
    if(p.brand)html+=p.brand+' ¬∑ ';
    if(p.sku)html+=p.sku+' ¬∑ ';
    if(p.category)html+=p.category+' ¬∑ ';
    if(p.stock_qty)html+=p.stock_qty+' in stock';
    else html+='Stock N/A';
    html+='</div>';
    if(p.fitment)html+='<div class="meta" style="margin-top:4px;color:var(--blue)">Fits: '+p.fitment+'</div>';
    html+='</div>';
  });
  html+='</div>';
  document.getElementById('productList').innerHTML=html;
  document.getElementById('productCount').textContent=products.length;
}

// ===== API PANEL =====
function showApiPanel(){
  document.getElementById('apiPanel').style.display='block';
  var key=vendorData?'bsd_'+vendorData.id.replace(/-/g,'').slice(0,24):'bsd_login_first';
  document.getElementById('apiKeyField').value=key;
  document.getElementById('apiPanel').scrollIntoView({behavior:'smooth'});
}
function hideApiPanel(){document.getElementById('apiPanel').style.display='none'}
function copyApiKey(){
  var el=document.getElementById('apiKeyField');
  el.select();el.setSelectionRange(0,99999);
  navigator.clipboard.writeText(el.value).then(function(){alert('API key copied!')});
}

// ===== DISTRIBUTOR PANEL =====
function showDistPanel(){document.getElementById('distPanel').style.display='block';document.getElementById('distPanel').scrollIntoView({behavior:'smooth'})}
function hideDistPanel(){document.getElementById('distPanel').style.display='none'}
function connectDist(id){
  var el=document.getElementById('dist-'+id);
  if(el){el.style.display=el.style.display==='none'?'block':'none'}
}
function saveDist(id){
  if(id==='apg'){
    var acct=document.getElementById('apgAcct').value.trim();
    var key=document.getElementById('apgKey').value.trim();
    if(!acct||!key){alert('Please enter your APG account number and API key.');return}
    alert('APG connection saved! Sync will begin once the product database is ready.');
  }else if(id==='custom'){
    var url=document.getElementById('customFeedUrl').value.trim();
    if(!url){alert('Please enter your feed URL.');return}
    alert('Custom feed saved! Auto-sync will begin once the product database is ready.');
  }
}

// ===== PRODUCT SEARCH =====
function filterProducts(){
  // Will wire to Supabase query once products table exists
  var q=document.getElementById('prodSearch').value.trim().toLowerCase();
  console.log('Search:',q);
}

// ===== SETTINGS =====
async function saveSettings(){
  if(!vendorData)return;
  var phone=document.getElementById('setPhone').value.trim();
  var web=document.getElementById('setWeb').value.trim();
  var r=await sb.from('vendors').update({phone:phone||null,website:web||null}).eq('id',vendorData.id);
  if(r.error){alert('Error saving: '+r.error.message);return}
  alert('Settings saved!');
}

async function changePassword(){
  var pw=document.getElementById('setNewPw').value;
  var conf=document.getElementById('setConfPw').value;
  if(!pw||pw.length<8){alert('Password must be at least 8 characters.');return}
  if(pw!==conf){alert('Passwords do not match.');return}
  var r=await sb.auth.updateUser({password:pw});
  if(r.error){alert('Error: '+r.error.message);return}
  alert('Password updated successfully!');
  document.getElementById('setNewPw').value='';
  document.getElementById('setConfPw').value='';
}

// ===== APPLICATION FORM =====
async function handleApply(){
  var biz=document.getElementById('appBiz').value.trim();
  var name=document.getElementById('appName').value.trim();
  var email=document.getElementById('appEmail').value.trim();
  var phone=document.getElementById('appPhone').value.trim();
  var web=document.getElementById('appWeb').value.trim();
  var type=document.getElementById('appType').value;
  var skus=document.getElementById('appSkus').value;
  var msg=document.getElementById('appMsg').value.trim();
  var cats=[];document.querySelectorAll('.checkbox-grid input:checked').forEach(function(c){cats.push(c.value)});
  var errEl=document.getElementById('applyErr');
  if(!biz||!name||!email||!type){errEl.textContent='Please fill in all required fields.';errEl.style.display='block';return}
  errEl.style.display='none';
  var btn=document.getElementById('applyBtn');btn.textContent='Submitting...';btn.disabled=true;
  try{
    var res=await fetch(SUPA_URL+'/rest/v1/vendor_applications',{method:'POST',headers:{'Content-Type':'application/json','apikey':SUPA_ANON,'Prefer':'return=minimal'},body:JSON.stringify({business_name:biz,contact_name:name,email:email,phone:phone||null,website:web||null,business_type:type,product_categories:cats,estimated_skus:skus||null,message:msg||null})});
    if(res.ok){document.getElementById('applyForm').style.display='none';document.getElementById('applySuccess').style.display='block'}
    else if(res.status===409){errEl.textContent='This email has already submitted an application.';errEl.style.display='block';btn.textContent='Submit Application';btn.disabled=false}
    else{throw new Error('fail')}
  }catch(e){errEl.textContent='Something went wrong. Please try again.';errEl.style.display='block';btn.textContent='Submit Application';btn.disabled=false}
}

// Smooth scroll for pitch page links
document.querySelectorAll('#pitchPage a[href^="#"]').forEach(function(a){a.addEventListener('click',function(e){e.preventDefault();var t=document.querySelector(a.getAttribute('href'));if(t)t.scrollIntoView({behavior:'smooth'})})});
</script>
</body>
</html>
